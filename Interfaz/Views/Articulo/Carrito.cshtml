@model Interfaz.Models.CarritoViewModel
@{
    ViewData["Title"] = "Carrito";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">
    <h2>Carrito de Compras</h2>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Imagen</th>
                <th>Nombre</th>
                <th>Precio</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Articulos != null && Model.Articulos.Any())
            {
                @foreach (ArticuloViewModel articulo in Model.Articulos)
                {
                    <tr>
                        <td>
                            @if (!string.IsNullOrEmpty(articulo.Imagen))
                            {
                                <img src="@articulo.Imagen" alt="@articulo.Nombre" style="max-height: 100px;" />
                            }
                            else
                            {
                                <span>Sin imagen</span>
                            }
                        </td>
                        <td>@articulo.Nombre</td>
                        <td>@articulo.Precio €</td>
                        <td>

                            <a href="@Url.Action("Eliminar", "Carrito", new { id = articulo.Id })" class="btn btn-danger btn-sm"><i class="bi bi-trash"></i> Eliminar</a>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr><td colspan="4">No hay artículos en el carrito.</td></tr>
            }
        </tbody>
    </table>

    <h3>Total: @Model.Subtotal €</h3>

    <div class="d-flex justify-content-between">
        <a href="@Url.Action("Index", "Home")" class="btn btn-primary">Seguir Comprando</a>

        @if (Model.Articulos != null && Model.Articulos.Any())
        {
            <form method="post" action="@Url.Action("RevisarPedido", "Articulo")">
                <button type="submit" class="btn btn-success">Pasar por Caja</button>
            </form>
        }
    </div>
</div>
